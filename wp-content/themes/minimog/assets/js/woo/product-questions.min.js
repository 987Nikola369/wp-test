!function(u){"use strict";var m=window.minimog.Helpers;u(document).ready(function(){var e,s,d,r,n,t;e=u("#minimog-wc-question"),s=u(".woocommerce-noreviews",e),d=u(".question-list-container",e),r=u(".question-list",e),u(document.body).on("submit",".question-form",function(e){e.preventDefault();var n=u(this),t=n.find('button[type="submit"]'),o=u("[name=question]",n),a=parseInt(u("input[name=question_parent_id]",n).val()),i=parseInt(u(".question-count",d).html());u.ajax({url:$minimog.ajaxurl,type:"POST",cache:!1,dataType:"json",data:n.serialize(),success:function(e){var t;(e.success?(a?((t=u(".children","#li-comment-"+a)).length?t.prepend(e.data.response):(t=u('<ol class="children" />')).appendTo("#li-comment-"+a).html(e.data.response),u(document.body).trigger("minimog_product_question_child_added",[a])):(i+=1,s.length&&s.remove(),r.prepend(e.data.response)),t=1===i?e.data.single_text:e.data.plural_text,u(".question-count",d).html(i),u(".question-text",d).html(t),o.val(""),u(document.body).trigger("minimog_product_question_added",[e.data,!0]),n.find(".question-form-message-box").addClass("success")):n.find(".question-form-message-box").addClass("failed")).text(e.data.message).slideDown()},beforeSend:function(){n.find(".question-form-message-box").text("").removeClass("failed success").slideUp(),m.setElementHandling(t)},complete:function(){m.unsetElementHandling(t)}})}),u(document.body).on("click",".question-reply",function(e){e.preventDefault();var e=u(this),t=e.data("question-id"),n=u("#modal-product-question"),o=n.find(".modal-title"),a=n.find(".question-form-message-box"),i=n.find('input[name="question_parent_id"]'),e=e.closest(".comment-footer").siblings(".meta").children(".fn").text(),s=n.data("reply-title");a.removeClass("success failed").text(""),s=s.replace("{comment_author_name}",e),o.text(s),n.MinimogModal("open"),i.val(t)}),n=u("#minimog-wc-question"),(t=u(".question-search-form",n)).on("submit",function(e){return e.preventDefault(),u.ajax({url:$minimog.ajaxurl,type:"GET",data:t.serialize(),dataType:"json",cache:!0,success:function(e){e.data.fragments&&(u.each(e.data.fragments,function(e,t){u(e).empty(),""!==t&&(t=u.trim(t),t=u(u.parseHTML(t)),u(e).html(t.html()))}),u(document.body).trigger("minimog_get_product_questions_fragments_loaded"))},beforeSend:function(){m.setBodyHandling();var e=0,t=u(".question-toolbar",n).offset().top;t-=e=u(document.body).hasClass("header-sticky-enable")?u("#page-header").outerHeight():e,u("html, body").animate({scrollTop:t},800)},complete:function(){m.setBodyCompleted()}}),!1}),u(document.body).on("click",".question-navigation a",function(e){e.preventDefault();e=m.getUrlParamsAsObject(u(this).attr("href")),e=e?e.current_page:1;t.find('input[name="current_page"]').val(e),t.trigger("submit")})})}(jQuery);