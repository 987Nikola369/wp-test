!function(p){"use strict";"function"!==p.fn.block&&p.fn.extend({block:function(){},unblock:function(){}});var t=p(window),f=p("body"),m=window.minimog.Helpers;function n(t,e){var i,t=p(t.html()),s=(f.append(t),t.find(".product-container")),c=s.find(".woo-single-info"),a=s.find(".woo-single-images"),n=t.find(".cart.variations_form"),r=(0<n.length&&"undefined"!=typeof wc_add_to_cart_variation_params&&(n.wc_variation_form(),"undefined"!=typeof isw)&&void 0!==isw.Swatches&&isw.Swatches.register(n),t.find(".variations_form")),l=a.children(".woo-single-gallery"),a=l.children(".minimog-main-swiper"),o={},u=(l.hasClass("has-thumbs-slider")&&(o={thumbs:{swiper:l.children(".minimog-thumbs-swiper").MinimogSwiper()}}),0<a.length&&a.MinimogSwiper(o),d(),l.on("minimog_wc_gallery_init_light_gallery",d),!0);function d(){p.fn.lightGallery&&l.hasClass("has-light-gallery")&&(l.removeData("lightGallery"),l.lightGallery(window.minimog.LightGallery))}767<window.innerWidth-m.getScrollbarWidth()&&(i=l,new Promise((t,e)=>{var a=setInterval(function(){0<i.height()&&(clearInterval(a),t())},50)}).then(t=>{var e=l.height(),a=e,i=e,n=window.innerHeight-60,r=c,o=(u=!1,s.data("quick-view")),d=2*o.spacing;o.imageCover?(r=s.find(".quick-view-col-summary .inner-content"),a=e+d,i=Math.min(n,a),0<o.spacing?i-=d:i-=60):(a=e+d,i=Math.min(n,a),i-=d),r.outerHeight(parseInt(i)),p.fn.perfectScrollbar&&!m.isHandheld()&&r.perfectScrollbar({suppressScrollX:!0}),o.imageCover&&s.find(".woo-single-images").addClass("image-cover")})),r.find('select[name="quantity"]').MinimogNiceSelect({renderTarget:n.find(".row-isw-swatch-quantity-wrap")}),p.fn.MinimogAccordion&&0<(o=t.find(".minimog-accordion")).length&&o.MinimogAccordion(),t.MinimogModal({removeOnClose:!0,perfectScrollbar:u}),0<a.length&&a.children(".swiper-inner").children(".swiper")[0].swiper.update(),e.removeClass("loading")}function r(a){var t,e,i,n,r;a.hasClass("disabled")||a.hasClass("woosb-disabled")||(e=(t=a.closest("form.cart")).find("[name=add-to-cart]").val(),i=t.find("input[name=variation_id]").val(),n=t.find(".quantity .qty[name=quantity]").val(),0!==(e="add-to-cart"===a.attr("name")?a.val():e)&&(!1===p(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[a])?p(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,a]):(r={product_id:e,variation_id:i},t.serializeArray().map(function(t){var e;"add-to-cart"!==t.name&&(t.name.endsWith("[]")?((e=t.name.substring(0,t.name.length-2))in r||(r[e]=[]),r[e].push(t.value)):r[t.name]=t.value)}),a.attr("data-qty")&&(n=parseInt(a.attr("data-qty"))),r.quantity=n,a.removeClass("added").addClass("loading updating-icon"),p("body").trigger("adding_to_cart",[a,r]),p.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","minimog_add_to_cart"),r,function(t){var e;t&&(t.error&&t.product_url?window.location=t.product_url:(e=a.data("redirect"))&&""!==e?window.location=e:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:p(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,a]))}).always(function(){a.addClass("added").removeClass("loading updating-icon")}))))}p(document).ready(function(){p(document.body).on("click",".modal-quick-view-popup .woosw-btn",function(){var t=p(this).closest(".modal-quick-view-popup");0<t.length&&p.fn.MinimogModal&&t.MinimogModal("close")}),p(".minimog-product").on("click",".quick-view-btn",function(t){t.preventDefault(),t.stopPropagation();var e,a=p(this);a.hasClass("loading")||p.fn.MinimogModal&&(a.addClass("loading"),t=a.data("pid"),0<(e=f.children("#modal-quick-view-product-"+t)).length?n(e,a):(t={pid:t},p.ajax({url:$minimogWoo.wc_ajax_url.toString().replace("%%endpoint%%","minimog_product_quick_view"),type:"GET",data:p.param(t),dataType:"json",cache:!0,success:function(t){e=p(t.template),f.append(e),n(e,a)}})))}),function(){if("undefined"==typeof wc_add_to_cart_params)return;p(document).on("click",".ajax_add_variation_to_cart",function(t){t.preventDefault(),t.stopPropagation();var e=p(this),t=e.data("quantity"),a=0,i={},n=e.siblings('select[name="product_variation_id"]');if(0<n.length){n=n.children(":selected"),a=n.data("variation-id"),i=n.val();i=JSON.parse(i)}else{n=e.parents(".product").first().find(".variations_form");if(0<n.length){var r=!0;if(n.find("select[name^=attribute]").each(function(){var t=p(this),e=t.attr("name"),t=t.val();0===t.length?r=!1:i[e]=t}),!r)return window.alert("Please select a product option before adding this product to your cart."),!1;a=n.find(".variation_id").val()}}return a&&i?(e.removeClass("added").addClass("loading updating-icon"),i.quantity=t,i.product_id=a,p("body").trigger("adding_to_cart",[e,i]),p.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","minimog_add_to_cart"),i,function(t){t&&(t.error&&t.product_url?window.location=t.product_url:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:p(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,e]))}).always(function(){e.addClass("added").removeClass("loading updating-icon")})):window.alert("Please select a product option before adding this product to your cart."),!1})}(),function(){if("undefined"==typeof wc_add_to_cart_params)return;p(document).on("click","button.single_add_to_cart_button.ajax_add_to_cart",function(t){t.preventDefault(),r(p(this))})}(),p(document.body).on("click",".js-product-variation-term",function(t){t.preventDefault();var t=p(this),e=t.parents(".loop-product-variation-selector").first(),a=e.closest(".product"),i=a.find(".product-main-image"),n=e.data("product_attribute"),r=e.data("product_variations"),e=e.data("product_variations_images"),o=!1;if(t.hasClass("selected"))m.resetContentHTML(a.find(".price")),i.find(".variation-image").remove(),a.removeClass("product-image-switching has-variation-selected"),t.removeClass("selected");else{t.siblings().removeClass("selected"),t.addClass("selected");var d=t.data("term"),t=a.find("select[name="+n+"]");0<t.length&&t.val(d).trigger("change");for(var s,c=r.length-1;0<=c;c--){var l=r[c];l.attributes&&Object.entries(l.attributes).forEach(([t,e])=>{n===t&&e===d&&(o=l)})}!1!==o?(a.addClass("product-image-switching"),t=e[o.variation_id],e=i.children(".product-main-image-img"),(s=p("<img />",{class:"variation-image",src:t,alt:e.attr("alt")})).attr("width",e.attr("width")),s.attr("height",e.attr("height")),m.getImgLoadPromise(s).then(t=>{i.find(".variation-image").remove(),i.append(s),a.removeClass("product-image-switching").addClass("has-variation-selected")}),""!==(t=o.price_html)&&m.setContentHTML(a.find(".price"),p(t).html())):i.find(".variation-image").remove()}}),p(".widget_product_categories").each(function(){var t=p(this),i="opened",t=(t.find(".cat-parent").each(function(){var t=p(this),e=p(this).children("a").clone(),a=$minimog.i18l.all,i=p('<li class="cat-item cat-item-all"></li>'),a=a.replace("%s",e.html());e.html(a),t.hasClass("current-cat")&&(t.removeClass("current-cat"),t.addClass("current-cat-parent"),i.addClass("current-cat")),i.append(e),p(this).children(".children").prepend(i)}),t.on("click","a",function(t){t.stopPropagation();var e=p(this),a=e.parent("li"),e=e.siblings(".children");0<e.length&&(t.preventDefault(),a.hasClass(i)?(a.removeClass(i),a.find("."+i).removeClass(i),e.stop().slideUp(250)):(a.siblings("."+i).removeClass(i).children(".children").stop().slideUp(250),a.addClass(i),e.stop().slideDown(250)))}),t.on("click","li.cat-parent",function(t){p(this).children("a").trigger("click")}),t.find(".current-cat-parent, .current-cat"));t.addClass(i),t.children(".children").stop().slideDown(250)});var e,i=p(".page-sidebar");function a(){var t,e,a=i.filter(".sidebar-off-mobile");window.innerWidth<=991?(a.addClass("sidebar-switching sidebar-off"),(t=a.find(".page-sidebar-content-wrap")).outerHeight(window.innerHeight),p.fn.perfectScrollbar&&!m.isHandheld()&&t.perfectScrollbar({suppressScrollX:!0})):(a.addClass("sidebar-switching").removeClass("sidebar-off"),f.removeClass("off-sidebar-opened"),m.unsetBodyOverflow(),e=(t=a.find(".page-sidebar-content-wrap")).data("perfectScrollbar"),t.css("height","auto"),p.fn.perfectScrollbar&&e&&e.destroy()),setTimeout(function(){a.removeClass("sidebar-switching")},350)}p(document).on("click",".btn-js-open-off-sidebar",function(t){t.preventDefault();var t=p(this),t=i.filter(".sidebar-"+t.data("sidebar-target"));0<t.length&&(t.addClass("off-sidebar-active"),f.addClass("off-sidebar-opened"),m.setBodyOverflow(),(t=t.find(".page-sidebar-content-wrap")).outerHeight(window.innerHeight),p.fn.perfectScrollbar)&&!m.isHandheld()&&t.perfectScrollbar({suppressScrollX:!0})}),p(document).on("click",".btn-close-off-sidebar",function(t){t.preventDefault(),f.removeClass("off-sidebar-opened"),i.removeClass("off-sidebar-active"),m.unsetBodyOverflow()}),i.on("click",function(t){t.target===this&&(f.removeClass("off-sidebar-opened"),i.removeClass("off-sidebar-active"),m.unsetBodyOverflow())}),(f.hasClass("page-sidebar1-off-mobile")||f.hasClass("page-sidebar2-off-mobile"))&&(e=window.innerWidth,a(),t.on("resize",function(){var t=!0;e!==window.innerWidth&&(t=!(e<=991&&window.innerWidth<=991||991<e&&991<window.innerWidth)&&t)&&a(),e=window.innerWidth})),p(document.body).on("change",".product-variation-select",function(){var t=p(this).parents(".minimog-variation-select-wrap").find(".variations_form"),e=p(this).val();if(""!==e){var a=JSON.parse(e);for(const i in a)t.find('select[name="'+i+'"]').val(a[i]).trigger("change")}else t.find(".reset_variations").trigger("click")}),p("body").on("change",'input[name="payment_method"], #billing_country, #shipping_country, #shipping_state, #billing_state',function(){setTimeout(function(){p("body").trigger("update_checkout")},2e3)}),p(document.body).on("show_variation",".variations_form",function(t,e){var a=p(this),i=a.find('input[name="variation_id"]').val();i&&(a.find(".wad-qty-pricing-table").hide(),a.find('.wad-qty-pricing-table[data-id="'+i+'"]').show())}),p(document.body).on("click",".quantity-discount-add-button",function(t){t.preventDefault(),r(p(this))})}),p(document).on("found_variation",".variations_form",function(t,e){var a,i,n,r,t=p(t.target),o=t.closest(".product");o.hasClass("entry-product")&&(r=o.find(".entry-price-wrap").find(".price"),o=o.find(".entry-product-badges"),e.price_html&&(0<(n=(a=p(e.price_html)).find(".price")).length?m.setContentHTML(r,n):a.hasClass("price")&&m.setContentHTML(r,a.html())),"string"==typeof e.sale_flash_html&&(m.setContentHTML(o,o.html()),o.children(".onsale, .flash-sale").remove(),o.prepend(e.sale_flash_html)),t.closest(".entry-product"))&&(i="",t.find("select").each(function(){var t=p(this).attr("name"),e=p(this).find("option:selected").val();e&&(""!==i&&(i+="&"),i+=encodeURIComponent(t)+"="+encodeURIComponent(e))}),n=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+i,window.history.replaceState({},"",n),r=p("#product-share-url"))&&r.val(n)}),p(document).on("reset_data",".variations_form",function(t,e){const a=p(t.target);a.closest(".entry-product")&&a.find("select").each(function(){var t,e=p(this).attr("name");""===p(this).find("option:selected").val()&&(e=e,t=new URL(window.location),t.searchParams.delete(e),window.history.replaceState({},"",t))});var i,t=p("#product-share-url");t&&(i=new URL(window.location),t.val(i))}),p(document).on("hide_variation",".variations_form",function(t,e){var t=p(t.target).closest(".entry-summary"),a=t.children(".entry-price-wrap").children(".price"),t=t.find(".entry-product-badges");m.resetContentHTML(a),m.resetContentHTML(t)}),p(document).on("change.wc-variation-form",".variations select",function(t){t=p(t.currentTarget);t.closest(".variations_form").find(".variations select").not(t).each(function(){if(2===p(this).children("option").length){var t=p(this).children("option:eq(1)").val();if(p(this).val()!==t)return p(this).val(t).trigger("change"),p(this).siblings(".isw-swatch").find(".isw-term").removeClass("isw-selected").filter('[data-term="'+t+'"]').addClass("isw-selected"),!0}})})}(jQuery);