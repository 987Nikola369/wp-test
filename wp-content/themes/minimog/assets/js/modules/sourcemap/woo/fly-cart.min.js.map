{"version":3,"sources":["fly-cart.js"],"names":["$","$body","$popupFlyCart","ACTIVE_CLASS","Helpers","window","minimog","remove_from_cart","evt","$thisButton","wc_add_to_cart_params","preventDefault","this","ajax","type","url","$minimogWoo","wc_ajax_url","toString","replace","data","cart_item_key","dataType","beforeSend","block_loading","success","response","fragments","document","body","trigger","cart_hash","unblock_loading","location","attr","error","save_order_notes","$submitButton","find","notes","val","order_notes","each","key","value","replaceWith","setElementHandling","complete","unsetElementHandling","close_addon_modal","open_fly_cart","setBodyOverflow","addClass","fn","perfectScrollbar","isHandheld","setTimeout","handle_cart_body_scrollbar","hasClass","close_fly_cart","unsetBodyOverflow","removeClass","is_fly_cart_opening","offsetTop","offset","top","$cartHeader","$cartBody","$cartFooter","bodyH","innerHeight","outerHeight","Math","max","wheelPropagation","slideUp","empty","shipping_method_selected","shipping_methods","closest","security","$minimog","nonce","shipping_method","setBodyHandling","setBodyCompleted","shipping_calculator_submit","$form","currentTarget","serialize","$newElement","parseHTML","html","update_cart_goal","$cartData","first","length","cartData","count","free_shipping_class_only","$parent","$progress","newAmount","parseFloat","css","width","init_cart_countdown","MinimogCountdownTimer","$timer","$countdown","settings","startTime","Date","now","options","endTime","addZeroPrefix","formatter","loop","callback","text","expired_message","ready","timeout","on","$button","$wishlistModal","$quickViewModal","MinimogModal","add_to_cart_behaviour","e","target","targetSelector","$flyCartModal","modalTemplate","getAjaxUrl","template","context","cache","$qty","get","reportValidity","undefined","clearTimeout","cart_item_qty","itemKey","itemQty","jQuery"],"mappings":"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","file":"../../../woo/fly-cart.min.js","sourcesContent":["(function( $ ) {\n\t'use strict';\n\n\tvar $body         = $( 'body' ),\n\t    $popupFlyCart = $( '#popup-fly-cart' ),\n\t    ACTIVE_CLASS  = 'popup-fly-cart-opened',\n\t    Helpers       = window.minimog.Helpers;\n\n\t$( document ).ready( function() {\n\t\tinitFlyCart();\n\t} );\n\n\t$( document.body ).on( 'wc_fragments_loaded wc_fragments_refreshed', function() {\n\t\tunblock_loading();\n\n\t\tupdate_cart_goal();\n\t\tinit_cart_countdown();\n\n\t\tif ( $body.hasClass( ACTIVE_CLASS ) ) {\n\t\t\thandle_cart_body_scrollbar();\n\t\t}\n\t} );\n\n\t$( document.body ).on( 'removed_coupon applied_coupon', update_cart_goal );\n\n\t$( window ).on( 'load', init_cart_countdown );\n\n\tfunction initFlyCart() {\n\t\t$( document.body ).on( 'click', '.mini-cart__button', function( evt ) {\n\t\t\tif ( $popupFlyCart.length > 0 ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\topen_fly_cart();\n\t\t\t}\n\t\t} );\n\n\t\t$body.on( 'added_to_cart', function( evt, fragments, cart_hash, $button ) {\n\t\t\t/**\n\t\t\t * Fix Elementor Pro trigger this hook with poor params.\n\t\t\t */\n\t\t\tif ( typeof $button === 'undefined' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Close quick view modal when product adding to cart.\n\t\t\tvar $quickViewModal = $button.closest( '.modal-quick-view-popup' );\n\t\t\tif ( $quickViewModal.length > 0 && $.fn.MinimogModal ) {\n\t\t\t\t$quickViewModal.MinimogModal( 'close' );\n\t\t\t}\n\n\t\t\t// Close wishlist modal when product adding to cart.\n\t\t\tvar $wishlistModal = $button.closest( '#woosw_wishlist' );\n\t\t\tif ( $wishlistModal.length > 0 ) {\n\t\t\t\t$wishlistModal.removeClass( 'woosw-show' );\n\t\t\t\t$( document.body ).trigger( 'woosw_wishlist_hide' );\n\t\t\t}\n\n\t\t\tif ( $popupFlyCart.length > 0 && 'open_cart_drawer' === $minimogWoo.add_to_cart_behaviour ) {\n\t\t\t\topen_fly_cart();\n\t\t\t}\n\t\t} );\n\n\t\t$( '#btn-close-fly-cart' ).on( 'click', function( evt ) {\n\t\t\tevt.preventDefault();\n\n\t\t\tclose_fly_cart();\n\t\t} );\n\n\t\t$popupFlyCart.on( 'click', function( e ) {\n\t\t\tif ( e.target !== this ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclose_fly_cart();\n\t\t} );\n\n\t\t$( document ).on( 'click', '.fly-cart-addon-modal-toggle', function( evt ) {\n\t\t\tevt.preventDefault();\n\t\t\tvar targetSelector = $( this ).data( 'target' );\n\n\t\t\tvar $flyCartModal = $( targetSelector );\n\n\t\t\tif ( $flyCartModal.length > 0 ) {\n\t\t\t\tvar modalTemplate = $flyCartModal.data( 'minimog-template' );\n\t\t\t\tif ( ! $flyCartModal.hasClass( 'template-loaded' ) && modalTemplate ) {\n\t\t\t\t\t$.ajax( {\n\t\t\t\t\t\turl: Helpers.getAjaxUrl( 'template_lazyload' ),\n\t\t\t\t\t\ttype: 'GET',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttemplate: modalTemplate,\n\t\t\t\t\t\t\tcontext: 'wc_cart'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tcache: false,\n\t\t\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\t\t\t$flyCartModal.html( response.data.template );\n\n\t\t\t\t\t\t\t\tif ( $flyCartModal.hasClass( 'modal-shipping-calculator' ) ) {\n\t\t\t\t\t\t\t\t\t$( document.body ).trigger( 'country_to_state_changed' ); // Trigger select2 to load.\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t$popupFlyCart.addClass( 'modal-open' );\n\t\t\t\t\t\t\t\t$flyCartModal.addClass( 'open' );\n\t\t\t\t\t\t\t\t$flyCartModal.addClass( 'template-loaded' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbeforeSend: function() {\n\t\t\t\t\t\t\tblock_loading();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\t\tunblock_loading()\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t$popupFlyCart.addClass( 'modal-open' );\n\n\t\t\t\t\t$flyCartModal.addClass( 'open' );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t$popupFlyCart.on( 'click', '.btn-close-fly-cart-modal', function( evt ) {\n\t\t\tevt.preventDefault();\n\n\t\t\tclose_addon_modal();\n\t\t} );\n\n\t\t$popupFlyCart.on( 'click', '.js-remove-from-cart', remove_from_cart );\n\n\t\tvar timeout;\n\t\t$popupFlyCart.on( 'change', '.qty', function() {\n\t\t\tvar $qty = $( this );\n\n\t\t\tif ( ! $qty.get( 0 ).reportValidity() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( timeout !== undefined ) {\n\t\t\t\tclearTimeout( timeout );\n\t\t\t}\n\n\t\t\ttimeout = setTimeout( function() {\n\t\t\t\tvar itemKey = $qty.attr( 'name' );\n\t\t\t\tvar itemQty = $qty.val();\n\n\t\t\t\tupdate_quantity( itemKey, itemQty );\n\t\t\t}, 500 );\n\t\t} );\n\n\t\t$popupFlyCart.on( 'submit', '.form-fly-cart-order-notes', save_order_notes );\n\n\t\t// Shipping calculate.\n\t\t$( document ).on( 'change', 'select.shipping_method, :input[name^=shipping_method]', shipping_method_selected );\n\n\t\t$( document ).on( 'submit', 'form.fly-cart-shipping-calculator', shipping_calculator_submit );\n\t}\n\n\tfunction remove_from_cart( evt ) {\n\t\t/**\n\t\t * Check if Enable AJAX add to cart buttons on archives.\n\t\t */\n\t\tif ( typeof wc_add_to_cart_params === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tevt.preventDefault();\n\n\t\tvar $thisButton = $( this );\n\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: $minimogWoo.wc_ajax_url.toString().replace( '%%endpoint%%', 'remove_from_cart' ),\n\t\t\tdata: {\n\t\t\t\tcart_item_key: $thisButton.data( 'cart_item_key' )\n\t\t\t},\n\t\t\tdataType: 'json',\n\t\t\tbeforeSend: function() {\n\t\t\t\tblock_loading();\n\t\t\t},\n\t\t\tsuccess: function( response ) {\n\t\t\t\tif ( ! response || ! response.fragments ) {\n\t\t\t\t\twindow.location = $thisButton.attr( 'href' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$( document.body ).trigger( 'removed_from_cart', [\n\t\t\t\t\tresponse.fragments, response.cart_hash, $thisButton\n\t\t\t\t] );\n\n\t\t\t\tunblock_loading();\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\twindow.location = $thisButton.attr( 'href' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction update_quantity( cart_item_key, cart_item_qty ) {\n\t\tvar data = {\n\t\t\tcart_item_key: cart_item_key,\n\t\t\tcart_item_qty: cart_item_qty,\n\t\t\tsecurity: $minimog.nonce,\n\t\t};\n\n\t\t$.ajax( {\n\t\t\turl: $minimogWoo.wc_ajax_url.toString().replace( '%%endpoint%%', 'minimog_update_product_quantity' ),\n\t\t\ttype: 'POST',\n\t\t\tcache: false,\n\t\t\tdataType: 'json',\n\t\t\tdata: data,\n\t\t\tsuccess: function( response ) {\n\t\t\t\tcart_reload();\n\n\t\t\t\t$( document.body ).trigger( 'minimog_update_qty', [ cart_item_key, cart_item_qty ] );\n\t\t\t},\n\t\t\tbeforeSend: function() {\n\t\t\t\tblock_loading();\n\t\t\t},\n\t\t\tcomplete: function() {\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction save_order_notes() {\n\t\tvar $form         = $( this );\n\t\tvar $submitButton = $form.find( 'button[type=submit]' );\n\n\t\tvar notes = $( this ).find( 'textarea[name=\"order_comments\"]' ).val();\n\n\t\tvar data = {\n\t\t\torder_notes: notes,\n\t\t};\n\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: $minimogWoo.wc_ajax_url.toString().replace( '%%endpoint%%', 'minimog_save_order_notes' ),\n\t\t\tdata: data,\n\t\t\tdataType: 'json',\n\t\t\tsuccess: function( response ) {\n\t\t\t\tif ( response.data && response.data.fragments ) {\n\t\t\t\t\t$.each( response.data.fragments, function( key, value ) {\n\t\t\t\t\t\t$( key ).replaceWith( value );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t// Sync notes on other places.\n\t\t\t\t$( 'textarea[name=\"order_comments\"]' ).val( notes );\n\t\t\t},\n\t\t\tbeforeSend: function() {\n\t\t\t\tHelpers.setElementHandling( $submitButton );\n\t\t\t},\n\t\t\tcomplete: function() {\n\t\t\t\tHelpers.unsetElementHandling( $submitButton );\n\t\t\t\tclose_addon_modal();\n\t\t\t}\n\t\t} );\n\n\t\treturn false;\n\t}\n\n\tfunction open_fly_cart() {\n\t\tHelpers.setBodyOverflow();\n\n\t\t$body.addClass( ACTIVE_CLASS );\n\n\t\thandle_cart_wrap_scrollbar();\n\n\t\thandle_cart_body_scrollbar();\n\n\t\tif ( ! $popupFlyCart.hasClass( 'opened' ) ) {\n\t\t\t//block_loading(); Move it to below event.\n\t\t\t$( document.body ).trigger( 'minimog_fly_cart_first_open', [ $popupFlyCart ] );\n\t\t}\n\n\t\t$popupFlyCart.addClass( 'opened' ); // Used this class to load content on first time.\n\t}\n\n\tfunction close_fly_cart() {\n\t\tHelpers.unsetBodyOverflow();\n\n\t\t$body.removeClass( ACTIVE_CLASS );\n\t}\n\n\tfunction is_fly_cart_opening() {\n\t\tif ( $body.hasClass( ACTIVE_CLASS ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction close_addon_modal() {\n\t\t$popupFlyCart.find( '.fly-cart-addon-modal' ).removeClass( 'open' );\n\t\t$popupFlyCart.removeClass( 'modal-open' );\n\t}\n\n\tfunction cart_reload() {\n\t\t$( document.body ).trigger( 'wc_fragment_refresh' );\n\t}\n\n\tfunction handle_cart_wrap_scrollbar() {\n\t\tif ( ! $.fn.perfectScrollbar || Helpers.isHandheld() ) { // Use default scrollbar.\n\t\t\treturn;\n\t\t}\n\n\t\t// Add delay to fixed wrong calculate of scrollbar on first load.\n\t\tsetTimeout( function() {\n\t\t\t$popupFlyCart.find( '.fly-cart-wrap' ).perfectScrollbar();\n\t\t}, 100 );\n\t}\n\n\tfunction handle_cart_body_scrollbar() {\n\t\tvar offsetTop   = $popupFlyCart.offset().top; // Admin bar.\n\t\tvar $cartHeader = $popupFlyCart.find( '.fly-cart-header' );\n\t\tvar $cartBody   = $popupFlyCart.find( '.fly-cart-body' );\n\t\tvar $cartFooter = $popupFlyCart.find( '.fly-cart-footer' );\n\t\tvar windowH     = window.innerHeight;\n\n\t\t// 20 is spacing from body to footer.\n\t\tvar bodyH = windowH - $cartHeader.outerHeight() - $cartFooter.outerHeight() - 20 - offsetTop;\n\t\tbodyH     = Math.max( bodyH, 400 );\n\n\t\t$cartBody.outerHeight( bodyH );\n\n\t\tif ( $.fn.perfectScrollbar && ! Helpers.isHandheld() ) {\n\t\t\t$cartBody.perfectScrollbar( {\n\t\t\t\twheelPropagation: true\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction block_loading() {\n\t\t$popupFlyCart.find( '.fly-cart-messages' ).slideUp( 300, function() {\n\t\t\t$popupFlyCart.find( '.fly-cart-messages' ).empty();\n\t\t} );\n\t\t$popupFlyCart.removeClass( 'loaded' ).addClass( 'loading' );\n\t}\n\n\tfunction unblock_loading() {\n\t\t$popupFlyCart.removeClass( 'loading' ).addClass( 'loaded' );\n\t}\n\n\t/**\n\t * Clone from wc-cart\n\t * Handles when a shipping method is selected.\n\t */\n\tfunction shipping_method_selected() {\n\t\tvar shipping_methods = {};\n\n\t\tvar $wrapper = $( this ).closest( '.woocommerce-shipping-methods' );\n\n\t\t// eslint-disable-next-line max-len\n\t\t$wrapper.find( 'select.shipping_method, :input[name^=shipping_method][type=radio]:checked, :input[name^=shipping_method][type=hidden]' ).each( function() {\n\t\t\tshipping_methods[$( this ).data( 'index' )] = $( this ).val();\n\t\t} );\n\n\t\tvar data = {\n\t\t\tsecurity: $minimog.nonce,\n\t\t\tshipping_method: shipping_methods\n\t\t};\n\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: $minimogWoo.wc_ajax_url.toString().replace( '%%endpoint%%', 'minimog_update_shipping_method' ),\n\t\t\tdata: data,\n\t\t\tdataType: 'json',\n\t\t\tsuccess: function( response ) {\n\t\t\t\tif ( response.data && response.data.fragments ) {\n\t\t\t\t\t$.each( response.data.fragments, function( key, value ) {\n\t\t\t\t\t\t$( key ).replaceWith( value );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t},\n\t\t\tbeforeSend: function() {\n\t\t\t\tif ( is_fly_cart_opening() ) {\n\t\t\t\t\tblock_loading();\n\t\t\t\t} else {\n\t\t\t\t\tHelpers.setBodyHandling();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomplete: function() {\n\t\t\t\tif ( is_fly_cart_opening() ) {\n\t\t\t\t\tunblock_loading();\n\t\t\t\t} else {\n\t\t\t\t\tHelpers.setBodyCompleted();\n\t\t\t\t}\n\t\t\t\t$( document.body ).trigger( 'updated_shipping_method' );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Clone from wc-cart\n\t * Handles a shipping calculator form submit.\n\t *\n\t * @param {Object} evt The JQuery event.\n\t */\n\tfunction shipping_calculator_submit( evt ) {\n\t\tevt.preventDefault();\n\n\t\tclose_addon_modal();\n\t\tblock_loading();\n\n\t\tvar $form = $( evt.currentTarget );\n\n\t\t$.ajax( {\n\t\t\ttype: $form.attr( 'method' ),\n\t\t\turl: $minimogWoo.wc_ajax_url.toString().replace( '%%endpoint%%', 'minimog_calculate_shipping' ),\n\t\t\tdata: $form.serialize(),\n\t\t\tdataType: 'json',\n\t\t\tsuccess: function( response ) {\n\t\t\t\tif ( response.data.fragments ) {\n\t\t\t\t\t$.each( response.data.fragments, function( key, value ) {\n\t\t\t\t\t\t$( key ).empty();\n\n\t\t\t\t\t\tif ( '' !== value ) {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Append only children.\n\t\t\t\t\t\t\t * Avoid to use replaceWith to lost \"key\" events\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tvar $newElement = $( $.parseHTML( value ) );\n\t\t\t\t\t\t\t$( key ).html( $newElement.html() );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomplete: function() {\n\t\t\t\tunblock_loading();\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction update_cart_goal() {\n\t\tvar $cartData = $( '.cart-data-info' ).first();\n\t\tif ( $cartData.length > 0 ) {\n\t\t\tvar cartData = $cartData.data( 'value' );\n\n\t\t\tif ( 0 >= cartData.count ) {\n\t\t\t\t$body.addClass( 'cart-is-empty' );\n\t\t\t} else {\n\t\t\t\t$body.removeClass( 'cart-is-empty' );\n\t\t\t}\n\n\t\t\tif ( typeof cartData.free_shipping_class_only === 'number' && 1 === cartData.free_shipping_class_only ) {\n\t\t\t\t$body.addClass( 'cart-includes-only-free-shipping-class' );\n\t\t\t} else {\n\t\t\t\t$body.removeClass( 'cart-includes-only-free-shipping-class' );\n\t\t\t}\n\t\t}\n\n\t\t$( '.cart-goal-percent' ).each( function() {\n\t\t\tvar $parent   = $( this ).closest( '.cart-goal' ),\n\t\t\t    $progress = $parent.find( '.cart-goal-progress .progress-bar' ),\n\t\t\t    newAmount = parseFloat( $( this ).val() );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\t$progress.css( {\n\t\t\t\t\twidth: newAmount + '%'\n\t\t\t\t} );\n\n\t\t\t\tnewAmount < 100 ? $parent.removeClass( 'cart-goal-done shakeY' ) : $parent.addClass( 'cart-goal-done shakeY' );\n\t\t\t}, 300 );\n\t\t} );\n\t}\n\n\tfunction init_cart_countdown() {\n\t\tvar $cartData = $( '.cart-data-info' ).first();\n\n\t\tif ( 0 >= $cartData.length || ! $.fn.MinimogCountdownTimer ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cartData = $cartData.data( 'value' );\n\n\t\t$( '.cart-countdown-timer' ).each( function() {\n\t\t\tvar $timer     = $( this ),\n\t\t\t    $countdown = $timer.find( '.timer' ),\n\t\t\t    settings   = $timer.data( 'countdown' ),\n\t\t\t    startTime  = Date.now(),\n\t\t\t    endTime    = startTime + settings.length * 60 * 1000;\n\n\t\t\tvar options = {\n\t\t\t\tstartTime: startTime,\n\t\t\t\tendTime: endTime,\n\t\t\t\taddZeroPrefix: true,\n\t\t\t\tformatter: settings.formatter,\n\t\t\t\tloop: settings.loop,\n\t\t\t\tcallback: () => {\n\t\t\t\t\t$timer.find( '.cart-countdown-message' ).text( settings.expired_message );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Reset countdown on cart empty.\n\t\t\tif ( 0 >= cartData.count ) {\n\t\t\t\t$countdown.MinimogCountdownTimer( options );\n\t\t\t\t$countdown.MinimogCountdownTimer( 'clear' );\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$countdown.MinimogCountdownTimer( options );\n\t\t} );\n\t}\n}( jQuery ));\n"]}