{"version":3,"sources":["single.js"],"names":["$","$body","Helpers","window","minimog","TextCollapsible","HTMLElement","constructor","super","connectedCallback","Readmore","this","moreLink","$minimogProductSingle","i18n","readMore","lessLink","readLess","swatchesSelected","evt","attr","term","title","$thisTerm","$termRow","parents","first","hasClass","find","html","customElements","define","document","ready","lightGallery","fn","$sliderWrap","removeData","LightGallery","offsetTop","barHeight","ACTIVE_CLASS","$commentForm","options","$currentProduct","min","max","duration","labels","$text","$wrap","length","$minimog","isSingle","postType","featureStyle","thumbsSlider","MinimogSwiper","thumbs","swiper","autoScrollOffset","children","on","singleProductStickyBar","$stickyBar","$cartForm","offset","top","outerHeight","css","preventDefault","addClass","scrollTop","removeClass","body","animate","closest","trigger","$attachmentButton","fileName","files","filesSelected","replace","target","value","split","pop","text","_download","light_gallery_download","_autoPlay","light_gallery_auto_play","_zoom","light_gallery_zoom","_fullScreen","light_gallery_full_screen","_share","light_gallery_share","selector","mode","thumbnail","light_gallery_thumbnail","download","autoplay","zoom","share","fullScreen","hash","animateThumb","showThumbByDefault","getCaptionFromTitleOrAlt","each","$variationsForm","siblings","$select","attributeName","attributeValue","val","perfectScrollbar","isHandheld","suppressScrollY","useBothWheelAxes","pid","postID","cookieName","oldIDs","getCookie","viewedStr","viewed","i","splice","unshift","slice","join","setCookie","data","parseInt","setInterval","current","randomInteger","plural","singular","chartTable","$parent","parent","copyToClipboard","setTimeout","MinimogTabPanel","$toggleButton","$checkbox","isCheck","toggleClass","prop","$product","pID","isChecked","$productImageAdd","$modal","extend","sense","responsive","plugins","aspectRatio","height","width","append","MinimogModal","dynamic","removeOnClose","afterInit","modal","$modalContent","$el","$spinObject","spritespin","jQuery"],"mappings":"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","file":"../../../woo/single.min.js","sourcesContent":["(function( $ ) {\n\t'use strict';\n\n\tvar $body   = $( 'body' );\n\tvar Helpers = window.minimog.Helpers;\n\n\tclass TextCollapsible extends HTMLElement {\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t}\n\n\t\tconnectedCallback() {\n\t\t\tnew Readmore( this, {\n\t\t\t\tmoreLink: '<a href=\"#\" class=\"btn btn-flat btn-small\">' + $minimogProductSingle.i18n.readMore + '</a>',\n\t\t\t\tlessLink: '<a href=\"#\" class=\"btn btn-flat btn-small\">' + $minimogProductSingle.i18n.readLess + '</a>',\n\t\t\t} );\n\t\t}\n\t}\n\tcustomElements.define( 'text-collapsible', TextCollapsible );\n\n\n\t$( document ).ready( function() {\n\t\tinitProductImagesFeatures();\n\t\tinitSingleStickyAddToCartForm();\n\n\t\tcommentAttachmentUploadHandler();\n\t\tcommentAttachmentGalleryInit();\n\t\tfixProductBoughtTogether();\n\t\tsetProductViewed();\n\t\tliveViewsVisitors();\n\t\tinitSizeChart();\n\t\tinitProductShare();\n\n\t\t$body.on( 'isw_selected', swatchesSelected );\n\n\t\t$( '.minimog-tabs' ).MinimogTabPanel();\n\n\t\t$( document.body ).on( 'click', '.woobt-add-btn', function( evt ) {\n\t\t\tevt.preventDefault();\n\n\t\t\tvar ACTIVE_CLASS  = 'checked',\n\t\t\t    $toggleButton = $( this ),\n\t\t\t    pid           = $toggleButton.attr( 'data-pid' ),\n\t\t\t    $product      = $toggleButton.parents( '.woobt-images' ).siblings( '.woobt-products' ).find( '.woobt-product[data-pid=\"' + pid + '\"]' ),\n\t\t\t    $checkbox     = $product.find( '.woobt-checkbox' ),\n\t\t\t    isCheck       = $toggleButton.hasClass( ACTIVE_CLASS );\n\n\t\t\t$toggleButton.toggleClass( ACTIVE_CLASS );\n\t\t\t$checkbox.prop( 'checked', ! isCheck );\n\t\t\t$checkbox.trigger( 'change' );\n\t\t} );\n\n\t\t$( document.body ).on( 'change', '.woobt-layout-separate .woobt-checkbox', function() {\n\t\t\tvar $checkbox        = $( this ),\n\t\t\t    $product         = $checkbox.closest( '.woobt-product' ),\n\t\t\t    pID              = $product.data( 'pid' ),\n\t\t\t    isChecked        = $checkbox.prop( 'checked' ),\n\t\t\t    $productImageAdd = $product.parents( '.woobt-products' ).siblings( '.woobt-images' ).find( '.woobt-image-' + pID ).find( '.woobt-add-btn' );\n\n\t\t\tisChecked ? $productImageAdd.addClass( 'checked' ) : $productImageAdd.removeClass( 'checked' );\n\t\t} );\n\n\t\tinitProduct360();\n\t} );\n\n\tfunction initSizeChart() {\n\t\t// Size Chart Table.\n\t\tvar chartTable = $( '.minimog-size-guide__table-wrapper' );\n\t\tif ( $.fn.perfectScrollbar && chartTable.length > 0 ) {\n\t\t\tchartTable.perfectScrollbar( {\n\t\t\t\tsuppressScrollY: true,\n\t\t\t\tuseBothWheelAxes: true,\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction initProduct360() {\n\t\t$( document.body ).on( 'click', '.btn-open-product-360', function( evt ) {\n\t\t\tevt.preventDefault();\n\n\t\t\tvar $modal      = $( '<div id=\"modal-product-360\" class=\"modal-product-360\"></div>' ),\n\t\t\t    options     = $.extend( {}, {\n\t\t\t\t    sense: - 1,\n\t\t\t\t    responsive: true,\n\t\t\t\t    animate: false,\n\t\t\t\t    plugins: [\n\t\t\t\t\t    '360', // Required.\n\t\t\t\t\t    'wheel', 'drag'\n\t\t\t\t    ]\n\t\t\t    }, $( this ).data( 'spritespin-settings' ) ),\n\t\t\t    aspectRatio = options.height / options.width;\n\n\t\t\t$body.append( $modal );\n\n\t\t\t$modal.MinimogModal( {\n\t\t\t\tdynamic: true,\n\t\t\t\tremoveOnClose: true,\n\t\t\t\tafterInit: function( modal ) {\n\t\t\t\t\tvar $modalContent = modal.$el.find( '.modal-content-inner' ),\n\t\t\t\t\t    $spinObject   = $( '<div id=\"product-360-spritespin\" class=\"product-360-spritespin\" style=\"--aspect-ratio: ' + aspectRatio + '\"></div>' );\n\t\t\t\t\t$modalContent.append( $spinObject );\n\t\t\t\t\t$spinObject.spritespin( options );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\tfunction fixProductBoughtTogether() {\n\t\tvar $variationsForm     = $( '#woo-single-info .entry-summary > .variations_form' ),\n\t\t    $frequentlyProducts = $variationsForm.siblings( '.woobt-wrap' ),\n\t\t    $currentProduct     = $frequentlyProducts.find( '.woobt-product-this' );\n\n\t\t/**\n\t\t * Update Variations for This Product in Bought Together List.\n\t\t */\n\t\t$variationsForm.find( 'select' ).on( 'change', function() {\n\t\t\tvar $select        = $( this ),\n\t\t\t    attributeName  = $select.attr( 'name' ),\n\t\t\t    attributeValue = $select.val();\n\n\t\t\t$currentProduct.find( '.variations_form select[name=\"' + attributeName + '\"]' ).val( attributeValue ).trigger( 'change' );\n\t\t} );\n\n\t\tif ( $.fn.perfectScrollbar && ! Helpers.isHandheld() ) {\n\t\t\t$( '.woobt-products-wrap' ).perfectScrollbar( {\n\t\t\t\tsuppressScrollY: true,\n\t\t\t\tuseBothWheelAxes: true,\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction swatchesSelected( evt, attr, term, title, $thisTerm ) {\n\t\tvar $termRow = $thisTerm.parents( '.row-isw-swatch' ).first();\n\n\t\tif ( $termRow.hasClass( 'row-isw-swatch--isw_select' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$termRow.find( '.selected-term-name' ).html( title );\n\t}\n\n\tfunction initProductImagesFeatures() {\n\t\t// Selector without parent to compatible Elementor Pro.\n\t\tvar $sliderWrap = $( '.woo-single-gallery' );\n\n\t\tif ( 0 >= $sliderWrap.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction slider() {\n\t\t\tif ( ! $minimog.isSingle || 'product' !== $minimog.postType ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( $minimogProductSingle.featureStyle !== 'slider' && $minimogProductSingle.featureStyle !== 'slider-02' && $minimogProductSingle.featureStyle !== 'carousel' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar options = {};\n\t\t\tif ( $sliderWrap.hasClass( 'has-thumbs-slider' ) ) {\n\t\t\t\tvar thumbsSlider = $sliderWrap.find( '.minimog-thumbs-swiper' ).MinimogSwiper();\n\t\t\t\toptions          = {\n\t\t\t\t\tthumbs: {\n\t\t\t\t\t\tswiper: thumbsSlider,\n\t\t\t\t\t\tautoScrollOffset: 2,\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\t$sliderWrap.children( '.minimog-main-swiper' ).MinimogSwiper( options );\n\t\t}\n\n\t\tfunction lightGallery() {\n\t\t\tif ( $.fn.lightGallery && $sliderWrap.hasClass( 'has-light-gallery' ) ) {\n\t\t\t\t$sliderWrap.removeData( 'lightGallery' ); // Destroy init before re-init.\n\t\t\t\t$sliderWrap.lightGallery( window.minimog.LightGallery );\n\t\t\t}\n\t\t}\n\n\t\tslider();\n\t\t// Init Light Gallery after Swiper to make working loop mode.\n\t\tlightGallery();\n\n\t\t$sliderWrap.on( 'minimog_wc_gallery_init_light_gallery', lightGallery );\n\t}\n\n\tfunction initSingleStickyAddToCartForm() {\n\t\tif ( '1' !== $minimogProductSingle.singleProductStickyBar ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst $stickyBar = $( '#sticky-product-bar' );\n\t\tconst $cartForm  = $( '.entry-product form.cart' );\n\n\t\tif ( 0 >= $stickyBar.length || 0 >= $cartForm.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $addToCartBtn = $cartForm.find( '.single_add_to_cart_button' ),\n\t\t    offsetTop     = $addToCartBtn.offset().top,\n\t\t    barHeight     = $stickyBar.outerHeight(),\n\t\t    ACTIVE_CLASS  = 'showing';\n\n\t\t$body.css( '--sticky-atc-bar-height', barHeight + 'px' );\n\n\t\t$stickyBar.on( 'click', '.sticky-product-bar-close', function( evt ) {\n\t\t\tevt.preventDefault();\n\t\t\t$stickyBar.addClass( 'hide' );\n\t\t\t$body.css( '--sticky-atc-bar-height', 0 );\n\t\t} );\n\n\t\t$( window ).on( 'scroll', function() {\n\t\t\t$( this ).scrollTop() > offsetTop ? $stickyBar.addClass( ACTIVE_CLASS ) : $stickyBar.removeClass( ACTIVE_CLASS );\n\t\t} );\n\n\t\t$( document.body ).on( 'click', '.sticky-product-add_to_cart_button', function( evt ) {\n\t\t\tevt.preventDefault();\n\n\t\t\tvar offset = $cartForm.offset().top - 132; // admin bar + header height + content spacing.\n\n\t\t\t$( 'html, body' ).animate( { scrollTop: offset }, 600 );\n\t\t} );\n\t}\n\n\tfunction commentAttachmentUploadHandler() {\n\t\tvar $commentForm = $( '#commentform' );\n\n\t\t$commentForm.on( 'click', '.comment-form__attachment-button', function() {\n\t\t\tvar $attachmentButton = $( this ).closest( '.comment-form' ).find( '.comment-form-attachment__input' );\n\t\t\t$attachmentButton.trigger( 'click' );\n\t\t} );\n\n\t\t$commentForm.on( 'change', '.comment-form-attachment__input', function( evt ) {\n\t\t\tvar $attachmentButton = $( this ).closest( '.comment-form' ).find( '.comment-form__attachment-button' ),\n\t\t\t    fileName          = this.files && this.files.length > 1 ? $minimogProductSingle.i18n.filesSelected.replace( '{count}', this.files.length ) : evt.target.value.split( '\\\\' ).pop();\n\n\t\t\t$attachmentButton.find( '.button-text' ).text( fileName );\n\t\t} );\n\t}\n\n\tfunction commentAttachmentGalleryInit() {\n\t\tvar _download   = $minimog.light_gallery_download === '1',\n\t\t    _autoPlay   = $minimog.light_gallery_auto_play === '1',\n\t\t    _zoom       = $minimog.light_gallery_zoom === '1',\n\t\t    _fullScreen = $minimog.light_gallery_full_screen === '1',\n\t\t    _share      = $minimog.light_gallery_share === '1',\n\t\t    _thumbnail  = $minimog.light_gallery_thumbnail === '1';\n\n\t\tvar options = {\n\t\t\tselector: 'a',\n\t\t\tmode: 'lg-fade',\n\t\t\tthumbnail: _thumbnail,\n\t\t\tdownload: _download,\n\t\t\tautoplay: _autoPlay,\n\t\t\tzoom: _zoom,\n\t\t\tshare: _share,\n\t\t\tfullScreen: _fullScreen,\n\t\t\thash: false,\n\t\t\tanimateThumb: false,\n\t\t\tshowThumbByDefault: false,\n\t\t\tgetCaptionFromTitleOrAlt: false\n\t\t};\n\n\t\t$( '.dco-attachment-gallery' ).each( function() {\n\t\t\t$( this ).lightGallery( options );\n\t\t} );\n\t}\n\n\tfunction setProductViewed() {\n\t\tif ( 'product' !== $minimog.postType ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar pid        = $minimog.postID,\n\t\t    cookieName = 'recent_viewed_products',\n\t\t    oldIDs     = Helpers.getCookie( cookieName ),\n\t\t    viewedStr  = pid;\n\n\t\tif ( oldIDs !== '' ) {\n\t\t\tvar viewed = oldIDs.split( ',' );\n\n\t\t\tfor ( var i = 0; i < viewed.length; i ++ ) {\n\t\t\t\twhile ( viewed[i] == pid ) {\n\t\t\t\t\tviewed.splice( i, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tviewed.unshift( pid );\n\n\t\t\t// Store max 20 items.\n\t\t\tif ( viewed.length > 20 ) {\n\t\t\t\tviewed.slice( 1, 20 );\n\t\t\t}\n\n\t\t\tviewedStr = viewed.join();\n\t\t}\n\n\t\tHelpers.setCookie( cookieName, viewedStr, 7 );\n\t}\n\n\tfunction liveViewsVisitors() {\n\t\tvar $wrap = $( '#live-viewing-visitors' );\n\n\t\tif ( 0 >= $wrap.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar {\n\t\t\t    min,\n\t\t\t    max,\n\t\t\t    duration,\n\t\t\t    labels\n\t\t    }     = $wrap.data( 'settings' );\n\t\tvar $text = $wrap.find( '.text' );\n\t\tmin       = parseInt( min );\n\t\tmax       = parseInt( max );\n\n\t\tsetInterval( function() {\n\t\t\tvar current = Helpers.randomInteger( min, max ),\n\t\t\t    text    = current > 1 ? labels.plural : labels.singular;\n\t\t\ttext        = text.replace( '%s', '<span class=\"count\">' + current + '</span>' );\n\t\t\t$text.html( text );\n\t\t}, duration );\n\t}\n\n\tfunction initProductShare() {\n\t\t$( document.body ).on( 'click', '#product-share-url', function() {\n\t\t\tvar $parent = $( this ).parent(),\n\t\t\t    result  = Helpers.copyToClipboard( $( this ).val() );\n\n\n\t\t\tif ( result ) {\n\t\t\t\t$parent.attr( 'aria-label', $parent.attr( 'data-copied' ) );\n\t\t\t}\n\n\t\t\tsetTimeout( function() {\n\t\t\t\t$parent.attr( 'aria-label', $parent.attr( 'data-copy' ) );\n\t\t\t}, 2000 );\n\t\t} );\n\t}\n}( jQuery ));\n"]}