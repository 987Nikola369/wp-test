{"version":3,"file":"../../../widgets/widget-product-bundle.js","sources":["widgets/widget-product-bundle.js"],"sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar MinimogProductBundle = function( $scope, $ ) {\n\t\t\tvar $element     = $scope.find( '.tm-product-bundle' ),\n\t\t\t    $products    = $( '.woosb-products', $element ),\n\t\t\t    $buttonPrice = $element.find( '.single_add_to_cart_button .price' );\n\n\t\t\t// Element data.\n\t\t\tvar bundled_price          = $element.data( 'bundled_price' ),\n\t\t\t    bundled_price_from     = $element.data( 'bundled_price_from' ),\n\t\t\t    priceFormat            = $element.data( 'price_format' ),\n\t\t\t    priceDecimals          = $element.data( 'price_decimals' ),\n\t\t\t    priceThousandSeparator = $element.data( 'price_thousand_separator' ),\n\t\t\t    priceDecimalSeparator  = $element.data( 'price_decimal_separator' ),\n\t\t\t    currencySymbol         = $element.data( 'currency_symbol' ),\n\t\t\t    saveText               = $element.data( 'save_text' ),\n\t\t\t    discountAmount         = $element.data( 'discount_amount' );\n\n\t\t\t// Products data.\n\t\t\tvar discount = $products.data( 'discount' );\n\n\t\t\t// Place price next to button text.\n\t\t\t$( document ).on( 'woosb_calc_price', function( e, total_sale, total, total_html, price_suffix ) {\n\t\t\t\tvar discountAmountHtml = '';\n\n\t\t\t\tif ( parseFloat( discountAmount ) > 0 ) {\n\t\t\t\t\tdiscountAmountHtml = '<span class=\"woosb-discount-amount\">(' + '-' + format_price( discountAmount ) + ')</span>';\n\t\t\t\t}\n\n\t\t\t\t$buttonPrice.html( format_price( total_sale ) );\n\t\t\t} );\n\n\t\t\t$( document ).on( 'woosb_check_qty', function( e, qty, $qty ) {\n\t\t\t\tvar $product = $qty.closest( '.woosb-product' );\n\n\t\t\t\tif ( bundled_price === 'subtotal' ) {\n\t\t\t\t\tvar price_suffix = $product.attr( 'data-price-suffix' );\n\t\t\t\t\tvar ori_price = parseFloat( $product.attr( 'data-price' ) ) * parseFloat( qty );\n\n\t\t\t\t\tif ( parseFloat( discount ) > 0 && $products.attr( 'data-fixed-price' ) === 'no' ) {\n\t\t\t\t\t\tvar new_price    = ori_price * (\n\t\t\t\t\t\t\t    100 - parseFloat( discount )\n\t\t\t\t\t\t    ) / 100,\n\t\t\t\t\t\t    amount_saved = ori_price - new_price;\n\n\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t        .html( format_price( new_price ) + price_suffix )\n\t\t\t\t\t\t        .append( format_amount_saved( amount_saved ) )\n\t\t\t\t\t\t        .show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t        .html( format_price( ori_price ) + price_suffix )\n\t\t\t\t\t\t        .show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Change price variation product.\n\t\t\t$( document ).on( 'found_variation', function( e, t ) {\n\t\t\t\tvar $product = $( e['target'] ).closest( '.woosb-product' );\n\n\t\t\t\tif ( t['price_html'] !== undefined && t['price_html'] !== '' &&\n\t\t\t\t\tt[ 'display_price' ] !== undefined && t[ 'display_price' ] !== '' ) {\n\t\t\t\t\tchange_price( $product, t[ 'display_price' ], t[ 'display_regular_price' ], t['price_html'] );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tfunction change_price( $product, price, regular_price, price_html ) {\n\t\t\t\tvar price_suffix = $product.attr( 'data-price-suffix' );\n\n\t\t\t\t// hide ori price.\n\t\t\t\t$product.find( '.woosb-price-ori' ).hide();\n\n\t\t\t\t// calculate new price.\n\t\t\t\tif ( bundled_price === 'subtotal' ) {\n\t\t\t\t\tvar ori_price = parseFloat( price ) * parseFloat( $product.attr( 'data-qty' ) );\n\n\t\t\t\t\tif ( bundled_price_from === 'regular_price' && regular_price !== undefined ) {\n\t\t\t\t\t\tori_price = parseFloat( regular_price ) * parseFloat( $product.attr( 'data-qty' ) );\n\t\t\t\t\t}\n\n\t\t\t\t\tvar new_price = ori_price;\n\n\t\t\t\t\tif ( parseFloat( discount ) > 0 ) {\n\t\t\t\t\t\tnew_price = ori_price * (\n\t\t\t\t\t\t\t100 - discount\n\t\t\t\t\t\t) / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t        .html( format_price( new_price ) + price_suffix )\n\t\t\t\t\t        .append( format_amount_saved( ori_price, new_price ) )\n\t\t\t\t\t        .show();\n\t\t\t\t} else {\n\t\t\t\t\tif ( parseFloat( discount ) > 0 ) {\n\t\t\t\t\t\tvar ori_price = parseFloat( price );\n\n\t\t\t\t\t\tif ( bundled_price_from === 'regular_price' && regular_price !== undefined ) {\n\t\t\t\t\t\t\tori_price = parseFloat( regular_price );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar new_price = ori_price * (\n\t\t\t\t\t\t\t100 - parseFloat( discount )\n\t\t\t\t\t\t) / 100;\n\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t        .html( format_price( new_price ) + price_suffix )\n\t\t\t\t\t\t        .append( format_amount_saved( ori_price, new_price ) )\n\t\t\t\t\t\t        .show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( bundled_price_from === 'regular_price' && regular_price !== undefined ) {\n\t\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t\t        .html( format_price( regular_price ) + price_suffix )\n\t\t\t\t\t\t\t        .show();\n\t\t\t\t\t\t} else if ( '' !== price_html ) {\n\t\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t\t        .html( price_html )\n\t\t\t\t\t\t\t        .show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Format Price.\n\t\t\tfunction format_amount_saved( regular_price, sale_price = 0 ) {\n\t\t\t\tvar price = regular_price - sale_price;\n\n\t\t\t\tif ( price <= 0 ) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\n\t\t\t\treturn '<div class=\"woosb-price-saved\">' + saveText + ' ' + format_price( price ) + '</div>';\n\t\t\t}\n\n\t\t\tfunction format_price( price ) {\n\t\t\t\tvar price_html = '<span class=\"woocommerce-Price-amount amount\">';\n\t\t\t\tvar price_formatted = format_money( price, priceDecimals, '', priceThousandSeparator, priceDecimalSeparator );\n\n\t\t\t\tswitch ( priceFormat ) {\n\t\t\t\t\tcase '%1$s%2$s':\n\t\t\t\t\t\t//left\n\t\t\t\t\t\tprice_html += '<span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span>' + price_formatted;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '%1$s %2$s':\n\t\t\t\t\t\t//left with space\n\t\t\t\t\t\tprice_html += '<span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span> ' + price_formatted;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '%2$s%1$s':\n\t\t\t\t\t\t//right\n\t\t\t\t\t\tprice_html += price_formatted +\n\t\t\t\t\t\t              '<span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span>';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '%2$s %1$s':\n\t\t\t\t\t\t//right with space\n\t\t\t\t\t\tprice_html += price_formatted +\n\t\t\t\t\t\t              ' <span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span>';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t//default\n\t\t\t\t\t\tprice_html += '<span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span> ' + price_formatted;\n\t\t\t\t}\n\n\t\t\t\tprice_html += '</span>';\n\n\t\t\t\treturn price_html;\n\t\t\t}\n\n\t\t\tfunction format_money( number, places, symbol, thousand, decimal ) {\n\t\t\t\tnumber = number || 0;\n\t\t\t\tplaces = ! isNaN( places = Math.abs( places ) ) ? places : 2;\n\t\t\t\tsymbol = symbol !== undefined ? symbol : '$';\n\t\t\t\tthousand = thousand || ',';\n\t\t\t\tdecimal = decimal || '.';\n\n\t\t\t\tvar negative = number < 0 ? '-' : '',\n\t\t\t\t    i        = parseInt(\n\t\t\t\t\t    number = num_round( Math.abs( + number || 0 ), places ).toFixed( places ),\n\t\t\t\t\t    10 ) + '',\n\t\t\t\t    j        = 0;\n\n\t\t\t\tif ( i.length > 3 ) {\n\t\t\t\t\tj = i.length % 3;\n\t\t\t\t}\n\n\t\t\t\treturn symbol + negative + (\n\t\t\t\t\tj ? i.substr( 0, j ) + thousand : ''\n\t\t\t\t) + i.substr( j ).replace( /(\\d{3})(?=\\d)/g, '$1' + thousand ) + (\n\t\t\t\t\t       places ?\n\t\t\t\t\t   decimal +\n\t\t\t\t\t   num_round( Math.abs( number - i ), places ).toFixed( places ).slice( 2 ) :\n\t\t\t\t\t\t       ''\n\t\t\t\t       );\n\t\t\t}\n\n\t\t\tfunction num_round( value, decimals ) {\n\t\t\t\treturn Number( Math.round( value + 'e' + decimals ) + 'e-' + decimals );\n\t\t\t}\n\t\t};\n\n\t\t$( window ).on( 'elementor/frontend/init', function() {\n\t\t\telementorFrontend.hooks.addAction( 'frontend/element_ready/tm-product-bundle.default', MinimogProductBundle );\n\t\t} );\n\t}\n)( jQuery );\n"],"names":["$","MinimogProductBundle","$scope","$element","find","$products","$buttonPrice","bundled_price","data","bundled_price_from","priceFormat","priceDecimals","priceThousandSeparator","priceDecimalSeparator","currencySymbol","saveText","discountAmount","discount","format_amount_saved","regular_price","sale_price","price","format_price","price_html","price_formatted","number","places","symbol","thousand","decimal","isNaN","Math","abs","undefined","negative","i","parseInt","num_round","toFixed","j","length","substr","replace","slice","format_money","value","decimals","Number","round","document","on","e","total_sale","total","total_html","price_suffix","parseFloat","html","qty","$qty","ori_price","$product","closest","attr","amount_saved","new_price","append","show","t","hide","change_price","window","elementorFrontend","hooks","addAction","jQuery"],"mappings":"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"}