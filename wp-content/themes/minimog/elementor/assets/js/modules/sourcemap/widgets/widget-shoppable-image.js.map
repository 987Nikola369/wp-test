{"version":3,"file":"../../../widgets/widget-shoppable-image.js","sources":["widgets/widget-shoppable-image.js"],"sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar MinimogShoppableImage = function( $scope, $ ) {\n\t\t\tvar $element = $scope.find( '.minimog-shoppable-image' ),\n\t\t\t\tdataTagType = $element.data( 'tag_type' ),\n\t\t\t\t$wrapper = $( '.mabel-siwc-img-wrapper', $element );\n\n\t\t\tvar dataIcon = $wrapper.data(\"sw-icon\"),\n\t\t\t\tdataTags = $wrapper.data(\"sw-tags\"),\n\t\t\t\tdataText = $wrapper.data(\"sw-text\"),\n\t\t\t\tdataTagSize = $wrapper.data(\"sw-size\");\n\n\t\t\tvar arrowSize = 12;\n\n\t\t\tvar $icon = '<i class=\"'+ dataIcon +'\"></i>';\n\n\t\t\t$( document.body ).on( 'click', function(e) {\n\t\t\t\tif ( ! $( e.target ).is( '.mb-siwc-tag' )\n\t\t\t\t\t&& ! $( e.target ).parents( '.mb-siwc-tag' ).length\n\t\t\t\t\t&& ! $( e.target ).is( '.mb-siwc-popup-inner')\n\t\t\t\t\t&& ! $( e.target ).parents( '.mb-siwc-popup-inner' ).length\n\t\t\t\t) {\n\t\t\t\t\t$( '.mb-siwc-tag', this )\n\t\t\t\t\t\t.removeClass( 'active' )\n\t\t\t\t\t\t.next().addClass( \"mabel-invisible\" );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$.each( dataTags, function ( index, data ) {\n\t\t\t\tif ( 'numeric' === dataTagType ) {\n\t\t\t\t\t$icon = ( index + 1 ).toFixed(0);\n\t\t\t\t}\n\n\t\t\t\tvar img = data.thumb ? '<img src=\"' + data.thumb + '\" alt=\"'+ data.title +'\"/>' : '';\n\n\t\t\t\tvar $productContent = '<div class=\"mb-siwc-popup-inner\">'\n\t\t\t\t\t+ '<div class=\"siwc-thumb-wrapper\"><a target=\"_blank\" href=\"' + data.link + '\">' + img + '</a></div>'\n\t\t\t\t\t+ '<div class=\"siwc-content-wrapper\">'\n\t\t\t\t\t+ '<h3 class=\"product-title\"><a target=\"_blank\" href=\"' + data.link + '\">' + data.title + '</a></h3>'\n\t\t\t\t\t+ '<p class=\"price\">' + data.price + '</p>'\n\t\t\t\t\t+ '<a target=\"_blank\" class=\"product-link\" href=\"' + data.link + '\">' + dataText + '</a>'\n\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ '</div>';\n\n\t\t\t\tvar $popupInner =\n\t\t\t\t\t(\n\t\t\t\t\t\t$( '<span class=\"mb-siwc-tag\">' + $icon + '</span>' )\n\t\t\t\t\t\t.css({ top: data.posY + \"%\", left: data.posX + \"%\" })\n\t\t\t\t\t\t.on( \"click\", function ( event ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t\tvar $currentTag = $(event.currentTarget),\n\t\t\t\t\t\t\t\t$tag = $wrapper.find( \".mb-siwc-tag\" );\n\n\t\t\t\t\t\t\t$currentTag.toggleClass( \"active\" ),\n\t\t\t\t\t\t\t$tag.not( $currentTag ).removeClass( \"active\" ),\n\t\t\t\t\t\t\t$tag.not( $currentTag ).next().addClass( \"mabel-invisible\" ),\n\t\t\t\t\t\t\t$currentTag.next().toggleClass( \"mabel-invisible\" );\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.appendTo( $wrapper ),\n\t\t\t\t\t\t$( $productContent )\n\t\t\t\t\t);\n\n\t\t\t\tvar $popup = $('<div class=\"mb-siwc-popup mabel-invisible\">');\n\n\t\t\t\tdata.thumb || $popup.addClass(\"siwc-no-thumb\"),\n\t\t\t\t\t$popup\n\t\t\t\t\t\t.append( $popupInner )\n\t\t\t\t\t\t.appendTo( $wrapper )\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\ttop: data.posY + \"%\",\n\t\t\t\t\t\t\tleft: data.posX + \"%\",\n\t\t\t\t\t\t\tmarginLeft: -$popup.width() / 2,\n\t\t\t\t\t\t\tmarginTop: dataTagSize / 2 + 7\n\t\t\t\t\t\t});\n\n\t\t\t\t$( window ).on( 'resize', function() {\n\n\t\t\t\t\tvar p = getPopupPosition( data.posX, data.posY, $popup, $wrapper );\n\n\t\t\t\t\tif (\"bottom\" != p)\n\t\t\t\t\t\tswitch (p) {\n\t\t\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop : -1 * ( $popup.height() + dataTagSize / 2 + 7 )\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"top left\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop : -1 * ( $popup.height() + dataTagSize / 2 ),\n\t\t\t\t\t\t\t\t\tmarginLeft: -1 * ( $popup.width() + dataTagSize / 2 )\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"top right\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop : -1 * ( $popup.height() + dataTagSize / 2 ),\n\t\t\t\t\t\t\t\t\tmarginLeft: dataTagSize / 2\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"bottom left\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop: dataTagSize / 2,\n\t\t\t\t\t\t\t\t\tmarginLeft: -1 * ( $popup.width() + dataTagSize / 2 )\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"bottom right\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop: dataTagSize / 2,\n\t\t\t\t\t\t\t\t\tmarginLeft: dataTagSize / 2\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t$popup.addClass( \"mb-siwc-\" + p.replace(\" \", \"-\") );\n\t\t\t\t} ).trigger( 'resize' );\n\t\t\t});\n\n\t\t\tfunction getPopupPosition( posX, posY, $popup, $wrapper ) {\n\t\t\t\tvoid 0 === $wrapper && ( $wrapper = null ), null == $wrapper && ( $wrapper = $( document.body ) );\n\t\t\t\tvar popupH        = $popup.height(),\n\t\t\t\t\tpopupW        = $popup.width(),\n\t\t\t\t\twrapperHeight = $wrapper.height(),\n\t\t\t\t\twrapperWidth  = $wrapper.width(),\n\t\t\t\t\th             = ( popupH / wrapperHeight ) * 100,\n\t\t\t\t\tw             = ( popupW / wrapperWidth ) * 100,\n\t\t\t\t\tx \t\t\t  = wrapperWidth * posX / 100,\n\t\t\t\t\tposition      = posY + h > 100 ? \"top\" : \"bottom\";\n\n\t\t\t\tif ( posX + w > 100 && popupW < x ) {\n\t\t\t\t\tposition += ' left';\n\t\t\t\t} else if ( posX - w < 0 && popupW < wrapperWidth - x ) {\n\t\t\t\t\tposition += ' right';\n\t\t\t\t}\n\n\t\t\t\treturn position;\n\t\t\t}\n\t\t};\n\n\t\t$( window ).on( 'elementor/frontend/init', function() {\n\t\t\telementorFrontend.hooks.addAction( 'frontend/element_ready/tm-shoppable-image.default', MinimogShoppableImage );\n\t\t} );\n\t}\n)( jQuery );\n"],"names":["$","MinimogShoppableImage","$scope","dataTagType","$element","find","data","$wrapper","dataIcon","dataTags","dataText","dataTagSize","$icon","document","body","on","e","target","is","parents","length","this","removeClass","next","addClass","each","index","toFixed","img","thumb","title","$productContent","link","price","$popupInner","css","top","posY","left","posX","event","preventDefault","$currentTag","currentTarget","$tag","toggleClass","not","appendTo","$popup","append","marginLeft","width","marginTop","window","p","popupH","height","popupW","wrapperHeight","wrapperWidth","w","x","position","getPopupPosition","replace","trigger","elementorFrontend","hooks","addAction","jQuery"],"mappings":"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"}