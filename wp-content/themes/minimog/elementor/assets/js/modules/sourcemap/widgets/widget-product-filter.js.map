{"version":3,"file":"../../../widgets/widget-product-filter.js","sources":["widgets/widget-product-filter.js"],"sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar MinimogProductFilter = function( $scope, $ ) {\n\t\t\tvar $element = $scope.find( '.tm-product-filter' ),\n\t\t\t\t$form = $( '.tm-product-filter__form', $element );\n\t\t\t\n\t\t\t$element.on( 'click', '.term-link', termToggle );\n\t\t\t$element.on( 'submit', $form, formHandler );\n\t\t\t$element.on( 'click', '.tm-button', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$form.trigger( 'submit' );\n\t\t\t} );\n\n\t\t\t// Toggle Term\n\t\t\tfunction termToggle( e ) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar $el = $( this ),\n\t\t\t\t\t$filter = $el.closest( '.tm-product-filter__filter' ),\n\t\t\t\t\tvalue = $el.data( 'term' ),\n\t\t\t\t\t$input = $el.siblings( '.filter-attribute-input' ),\n\t\t\t\t\tcurrent = $input.val(),\n\t\t\t\t\tindex = -1;\n\n\t\t\t\tif ( $filter.hasClass( 'tm-product-filter__multiple' ) ) {\n\t\t\t\t\tcurrent = current ? current.split( ',' ) : [];\n\t\t\t\t\tindex = current.indexOf( value );\n\t\t\t\t\tindex = (-1 !== index) ? index : current.indexOf( value.toString() );\n\n\t\t\t\t\tif ( index !== -1 ) {\n\t\t\t\t\t\tcurrent.splice( index, 1 );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrent.push( value );\n\t\t\t\t\t}\n\n\t\t\t\t\t$input.val( current.join( ',' ) );\n\t\t\t\t\t$el.toggleClass( 'selected' );\n\n\t\t\t\t\t$input.prop( 'disabled', current.length <= 0 );\n\n\t\t\t\t\tif ( $filter.hasClass( 'tm-product-filter__attribute' ) ) {\n\t\t\t\t\t\tvar $queryTypeInput = $input.next( 'input[name^=query_type_]' );\n\n\t\t\t\t\t\tif ( $queryTypeInput.length ) {\n\t\t\t\t\t\t\t$queryTypeInput.prop( 'disabled', current.length <= 1 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( $el.hasClass( 'selected' ) ) {\n\t\t\t\t\t\t$el.removeClass( 'selected' );\n\t\t\t\t\t\t$input.val( '' ).prop( 'disabled', true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$el.addClass( 'selected' ).siblings( '.selected' ).removeClass( 'selected' );\n\t\t\t\t\t\t$input.val( value ).prop( 'disabled', false );\n\t\t\t\t\t}\n\t\t\t\t}\t\n\n\t\t\t\t$( document.body ).trigger( 'minimog_products_filter_change' );\n\t\t\t}\n\n\t\t\t// Form Handler\n\t\t\tfunction formHandler( e ) {\n\t\t\t\tvar $inputs = $element.find( 'input[type=hidden]' ),\n\t\t\t\t\taction = $form.attr('action'),\n\t\t\t\t\tseparator = action.indexOf('?') !== -1 ? '&' : '?',\n\t\t\t\t\tparams = {},\n\t\t\t\t\turl = action;\n\n\t\t\t\t$inputs.each( function( e ) {\n\t\t\t\t\tvar name = $( this ).attr( 'name' ),\n\t\t\t\t\t\tvalue = $( this ).val();\n\t\t\t\t\t\n\t\t\t\t\tif ( value ) {\n\t\t\t\t\t\tparams[name] = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// the filter always contains \"filtering\" param\n\t\t\t\t// so it is empty if the length less than 2\n\t\t\t\tif ( Object.keys( params ).length > 1 ) {\n\t\t\t\t\turl += separator + $.param( params, true );\n\t\t\t\t}\n\n\t\t\t\t// Update Url\n\t\t\t\tif ( '?' === url.slice( -1 ) ) {\n\t\t\t\t\turl = url.slice( 0, -1 );\n\t\t\t\t}\n\t\t\n\t\t\t\turl = url.replace( /%2C/g, ',' );\n\t\t\t\t\n\t\t\t\twindow.location.href = url;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\t$( window ).on( 'elementor/frontend/init', function() {\n\t\t\telementorFrontend.hooks.addAction( 'frontend/element_ready/tm-product-filter.default', MinimogProductFilter );\n\t\t} );\n\t}\n)( jQuery );\n"],"names":["$","MinimogProductFilter","$scope","$element","find","$form","on","e","preventDefault","$el","this","$filter","closest","value","data","$input","siblings","current","val","index","hasClass","split","indexOf","toString","splice","push","join","toggleClass","prop","length","$queryTypeInput","next","removeClass","addClass","document","body","trigger","$inputs","action","attr","separator","params","url","each","name","Object","keys","param","slice","replace","window","location","href","elementorFrontend","hooks","addAction","jQuery"],"mappings":"CAAA,SACWA,gBAGkB,SAAvBC,EAAiCC,EAAQF,GAC5C,IAAIG,EAAWD,EAAOE,KAAM,sBAC3BC,EAAQL,EAAG,2BAA4BG,GAExCA,EAASG,GAAI,QAAS,aAQtB,SAAqBC,GACpBA,EAAEC,iBAEF,IAAIC,EAAMT,EAAGU,MACZC,EAAUF,EAAIG,QAAS,8BACvBC,EAAQJ,EAAIK,KAAM,QAClBC,EAASN,EAAIO,SAAU,2BACvBC,EAAUF,EAAOG,MACjBC,GAAS,EAELR,EAAQS,SAAU,gCACtBH,EAAUA,EAAUA,EAAQI,MAAO,KAAQ,IAI3B,KAFhBF,GAAU,KADVA,EAAQF,EAAQK,QAAST,IACAM,EAAQF,EAAQK,QAAST,EAAMU,aAGvDN,EAAQO,OAAQL,EAAO,GAEvBF,EAAQQ,KAAMZ,GAGfE,EAAOG,IAAKD,EAAQS,KAAM,MAC1BjB,EAAIkB,YAAa,YAEjBZ,EAAOa,KAAM,WAAYX,EAAQY,QAAU,IAEtClB,EAAQS,SAAU,kCAClBU,EAAkBf,EAAOgB,KAAM,6BAEdF,QACpBC,EAAgBF,KAAM,WAAYX,EAAQY,QAAU,IAIjDpB,EAAIW,SAAU,aAClBX,EAAIuB,YAAa,YACjBjB,EAAOG,IAAK,IAAKU,KAAM,YAAY,KAEnCnB,EAAIwB,SAAU,YAAajB,SAAU,aAAcgB,YAAa,YAChEjB,EAAOG,IAAKL,GAAQe,KAAM,YAAY,IAIxC5B,EAAGkC,SAASC,MAAOC,QAAS,oCAlD7BjC,EAASG,GAAI,SAAUD,EAsDvB,SAAsBE,GACrB,IAAI8B,EAAUlC,EAASC,KAAM,sBAC5BkC,EAASjC,EAAMkC,KAAK,UACpBC,GAAqC,IAAzBF,EAAOhB,QAAQ,KAAc,IAAM,IAC/CmB,EAAS,GACTC,EAAMJ,EAEPD,EAAQM,KAAM,SAAUpC,GACvB,IAAIqC,EAAO5C,EAAGU,MAAO6B,KAAM,QAC1B1B,EAAQb,EAAGU,MAAOQ,MAEdL,IACJ4B,EAAOG,GAAQ/B,KAMmB,EAA/BgC,OAAOC,KAAML,GAASZ,SAC1Ba,GAAOF,EAAYxC,EAAE+C,MAAON,GAAQ,IAIhC,MAAQC,EAAIM,OAAQ,KACxBN,EAAMA,EAAIM,MAAO,GAAI,IAMtB,OAHAN,EAAMA,EAAIO,QAAS,OAAQ,KAE3BC,OAAOC,SAASC,KAAOV,GAChB,IAnFRvC,EAASG,GAAI,QAAS,aAAc,SAAUC,GAC7CA,EAAEC,iBACFH,EAAM+B,QAAS,YAqFjBpC,EAAGkD,QAAS5C,GAAI,0BAA2B,WAC1C+C,kBAAkBC,MAAMC,UAAW,mDAAoDtD,KAlG1F,CAqGGuD"}